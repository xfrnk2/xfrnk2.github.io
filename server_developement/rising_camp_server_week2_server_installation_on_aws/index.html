<!DOCTYPE html>


  
<html itemscope itemtype="https://schema.org/WebPage" class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="siteBaseUrl" content="https://xfrnk2.github.io/">
    <meta name="author" content="xfrnk2">
    <meta name="description" content="Bilberry Premium Theme for Hugo.">
    <meta name="keywords" content="blog,personal,responsive,search,font awesome,pages,posts,multilingual,highlight.js,syntax highlighting,premium,shortcuts">
    <meta name="generator" content="Hugo 0.69.0" />
    <title>
        
           
               서버를 구축하고 AWS상에 서비스하기 &vert; Rad Blog
           
        
    </title>
    <meta itemprop="name" content="서버를 구축하고 AWS상에 서비스하기">
    <meta itemprop="description" content="서버를 구축하고 AWS상에 서비스하기 - Bilberry Premium Theme for Hugo.">
    <meta property="og:site_name" content="Rad Blog">

    <meta property="og:title" content="서버를 구축하고 AWS상에 서비스하기" />
<meta property="og:description" content="목표  에러와 해결했던 내용을 기록하기 새롭게 알게된 것들을 알아보고 기록하기  진행 상황     Local 서버 구축 / Window/MacOS &#43; Apache PHP MySQL (Bitnami) 외부에서 접속하기: phpinfo 띄우기 (by 포트포워딩)     AWS 서버 구축 / Linux &#43; Nginx PHP MySQL 외부에서 접속하기: phpinfo 띄우기 MySQL 외부에서 접속하기 (DataGrip or Workbench) phpMyAdmin 설치 Domain 적용 (가비아, 후이즈 &hellip; 구입) HTTPS 적용 (let&rsquo;s encrypt) Sub Domain 적용 (Dev, Prod) Redirection 적용 (IP to Domain, http → https)     Sub Domain에 각각 나만의 페이지 만들기 (html, css, javascript 활용)   외부에서 접속하기: phpinfo 띄우기 (by 포트포워딩) 외부에서 접속하기 위한 포트포워딩 설정 자가 공유기의 관리자 이름과 비밀번호가 일치하지 않아서 초기화 후 차례대로 진행했다." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xfrnk2.github.io/server_developement/rising_camp_server_week2_server_installation_on_aws/" />
<meta property="article:published_time" content="2022-02-22T11:17:34+09:00" />
<meta property="article:modified_time" content="2022-02-22T11:17:34+09:00" />


    


    <script src="/modernizr-simple.js"></script>

    


    
    <link rel="canonical" href="https://xfrnk2.github.io/server_developement/rising_camp_server_week2_server_installation_on_aws/">
    

    <link rel="stylesheet" href="https://xfrnk2.github.io/theme.css">

    

    
        
            <link rel="stylesheet" href="https://xfrnk2.github.io/wwr11.css">
        
    

    
</head>

<body class="bilberry-hugo-theme">
    

    
    <nav>

    <div class="container">
        <ul class="topnav">
            
                
                    <li><a href="https://xfrnk2.github.io/page/about/">About</a></li>
                
            
        </ul>

        
            <div id="search-box" class="search">
                <i class="fas fa-search"></i>
                <input id="search" type="text" placeholder="Search ...">
            </div>
        
    </div>
</nav>


    
    <header>

    <div class="container">
        <div class="logo">
            <a href="/" class="logo">
                
                    <img src="/mugen.png" alt="">
                

                <span class="overlay"><i class="fa fa-home"></i></span>
            </a>
        </div>
        <div class="titles">
            <h3 class="title">
                <a href="/">
                    Rad Blog
                </a>
            </h3>

            
                <span class="subtitle">Archive</span>
            
        </div>

        

        
            <div class="toggler">
        
                <i class="fa fa-bars" aria-hidden="true"></i>
            </div>
    </div>
</header>


    <div class="main container">
        
    <div class="article-wrapper u-cf single">
        
            <a class="bubble" href="https://xfrnk2.github.io/server_developement/rising_camp_server_week2_server_installation_on_aws/">
    <i class="fas fa-fw fa-pencil-alt"></i>
</a>

<article class="default article">
    

    <div class="content">
    <h1 class="article-title">
        <a href="https://xfrnk2.github.io/server_developement/rising_camp_server_week2_server_installation_on_aws/">
            서버를 구축하고 AWS상에 서비스하기
        </a>
    </h1>

    <div class="meta">
        
            
                <span class="date moment">2022-02-22</span>
            
        

        

        
            <span class="categories">
                
                    
                    
                        <a href="https://xfrnk2.github.io/categories/server/">server</a>
                    
                
                    
                    
                        <a href="https://xfrnk2.github.io/categories/developement/">developement</a>
                    
                
            </span>
        

        
            <span class="author">
                
                
                    <a href="https://xfrnk2.github.io/author/xfrnk2/">xfrnk2</a>
                
            </span>
        
    </div>

    
        

        <h1 id="목표">목표</h1>
<ul>
<li><input checked="" disabled="" type="checkbox"> 에러와 해결했던 내용을 기록하기</li>
<li><input checked="" disabled="" type="checkbox"> 새롭게 알게된 것들을 알아보고 기록하기</li>
</ul>
<h1 id="진행-상황">진행 상황</h1>
<ol>
<li></li>
</ol>
<ul>
<li><input checked="" disabled="" type="checkbox"> <strong>Local 서버 구축 / Window/MacOS + Apache PHP MySQL (Bitnami)</strong></li>
<li><input checked="" disabled="" type="checkbox"> <strong>외부에서 접속하기: phpinfo 띄우기 (by 포트포워딩)</strong></li>
</ul>
<ol start="2">
<li></li>
</ol>
<ul>
<li><input checked="" disabled="" type="checkbox"> <strong>AWS 서버 구축 / Linux + Nginx PHP MySQL</strong></li>
<li><input checked="" disabled="" type="checkbox"> <strong>외부에서 접속하기: phpinfo 띄우기</strong></li>
<li><input checked="" disabled="" type="checkbox"> <strong>MySQL 외부에서 접속하기 (DataGrip or Workbench)</strong></li>
<li><input checked="" disabled="" type="checkbox"> <strong>phpMyAdmin 설치</strong></li>
<li><input checked="" disabled="" type="checkbox"> <strong>Domain 적용 (가비아, 후이즈 &hellip; 구입)</strong></li>
<li><input checked="" disabled="" type="checkbox"> <strong>HTTPS 적용 (let&rsquo;s encrypt)</strong></li>
<li><input checked="" disabled="" type="checkbox"> <strong>Sub Domain 적용 (Dev, Prod)</strong></li>
<li><input checked="" disabled="" type="checkbox"> <strong>Redirection 적용 (IP to Domain, http → https)</strong></li>
</ul>
<ol start="3">
<li></li>
</ol>
<ul>
<li><input checked="" disabled="" type="checkbox"> <strong>Sub Domain에 각각 나만의 페이지 만들기 (html, css, javascript 활용)</strong></li>
</ul>
<hr>
<h1 id="외부에서-접속하기-phpinfo-띄우기-by-포트포워딩"><strong>외부에서 접속하기: phpinfo 띄우기 (by 포트포워딩)</strong></h1>
<h3 id="외부에서-접속하기-위한-포트포워딩-설정">외부에서 접속하기 위한 포트포워딩 설정</h3>
<p><img src="https://user-images.githubusercontent.com/34790699/156510281-e37514e4-8697-47ef-823e-3aa748158588.png" alt="Untitled (20)"></p>
<p>자가 공유기의 관리자 이름과 비밀번호가 일치하지 않아서 초기화 후 차례대로 진행했다.</p>
<p><img src="https://user-images.githubusercontent.com/34790699/156510339-57245441-7f63-4246-99e2-b90f1963f9a1.png" alt="Untitled (21)"></p>
<p><img src="https://user-images.githubusercontent.com/34790699/156510393-4e5b305e-f47b-44b5-bcbe-5a78390175df.png" alt="Untitled (22)"></p>
<p>현재 접속된 PC의 IP주소로 설정 후 추가한다.</p>
<p><img src="https://user-images.githubusercontent.com/34790699/156510416-ab370005-9317-4944-9ba2-36a3c10f2c6a.png" alt="Untitled (23)"></p>
<p>초기화 한 김에 무선 비밀번호를 재설정하기 위해서 들어간 곳에 보이는 여러 프로토콜들..
학부 과정 중 눈에 익은 게 몇 보이지만, 당장 설명할 수는 없을 것 같아서, 간단하게 한 문장으로라도 요약해 보고 싶단 생각이 들어 정리해봤다.</p>
<p>AES는 <!-- raw HTML omitted -->의 약자로 &lsquo;고급 암호화 표준'라는 의미이고,
미국 표준 기술 연구소에 의해서 연방 정보 처리 표준으로 지정된 암호화 방식
AES-128, AES-192, AES-256로 불리고, 숫자는 각각 암호화 키 길이이고 키에 따라 각 10,  12, 14 라운드를 실행한다.</p>
<p>TKIP : 임시 키 무결성 프로토콜(Temporal Key Integrity Protocol, TKIP), IEEE 802.11의 무선 네트워킹 표준으로 사용되는 보안 프로토콜</p>
<p>WPA (Wi-Fi® Protected Access) 는 무선 환경을 위한 데이터 암호화 기술
PSK(Pre-shared Key).말 그대로 사전 공유키</p>
<p>이로서 노트북에 접근할 수 있는 조건이 완벽하게 갖추어 졌다.</p>
<hr>
<h3 id="phpinfo-띄우기">phpinfo 띄우기</h3>
<p>index.php파일을 새로 하나 만들어 주고&hellip;
apache2&gt; conf &gt; httpd.conf가 있다.
(http-daemon configuration)</p>
<p>열고 나서, &ldquo;DirectoryIndex&quot;를 찾아보자.
.php를 가장 우선 열고 싶다면, 순서를 바꾸어서, index.php index.html과 같이 수정할 수 있다.</p>
<p>웹 서버 호스팅을 받는 경우,
in dex.html을 아래와 같이 수정한다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;?php
</span><span style="color:#75715e">header(&#34;Location: index.php&#34;);
</span><span style="color:#75715e">exit;
</span><span style="color:#75715e">?&gt;</span>

&lt;<span style="color:#f92672">html</span>&gt;
...기존 코드...
&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><p><img src="https://user-images.githubusercontent.com/34790699/156510470-153f65bc-cdc5-4851-b731-8ecd16c0f9a8.png" alt="Untitled (24)"></p>
<p><img src="https://user-images.githubusercontent.com/34790699/156510538-aa452045-be7a-40c2-9ebb-9263e2c93b4e.png" alt="Untitled (25)"></p>
<p>아파치를 재시작하니 잘 나온다.</p>
<p><img src="https://user-images.githubusercontent.com/34790699/156510620-abe308c3-8ffd-4085-a816-00d91c74fdc0.png" alt="Untitled (26)"></p>
<hr>
<h1 id="aws-서버-구축--linux--nginx-php-mysql"><strong>AWS 서버 구축 / Linux + Nginx PHP MySQL</strong></h1>
<h3 id="aws-서버-생성">AWS 서버 생성</h3>
<ol>
<li>
<p>AWS 홈페이지 접속</p>
</li>
<li>
<p>계정 생성 및 로그인 후, 우상단 지역에 서울로 선택.</p>
</li>
<li>
<p>서비스 대분류에서 EC2를 클릭</p>
</li>
<li>
<p>인스턴스 선택 &gt; 인스턴스 시작</p>
</li>
<li>
<p>아래의 항목 선택</p>
</li>
</ol>
<p><img src="https://user-images.githubusercontent.com/34790699/156510679-bd4843ec-080d-40c7-9c67-6114198319fa.png" alt="Untitled (27)"></p>
<ol>
<li>기타 설정</li>
</ol>
<p>프리티어 선택후 기본 값 설정 유지 후 다음 단계
단계 4에서, 프리티어이므로 크기 30기가까지 사용 가능하다고 하니 30으로 정정해주기.</p>
<p>키 페어를 잘 보관하도록 한다.</p>
<p><img src="https://user-images.githubusercontent.com/34790699/156510697-17a5da02-718c-4bc5-86b1-35a6de956471.png" alt="Untitled (28)"></p>
<p>서버 생성 완료.</p>
<hr>
<h3 id="aws-서버-접속">AWS 서버 접속</h3>
<p>WinSCP 설치 후 로그인을 시도한다.</p>
<p>WinSCP는 마이크로소프트 윈도우용으로 개발된 자유-오픈 소스 소프트웨어이고, SFTP, SCP 및 FTP 클라이언트이다. 주요 기능은 로컬 및 원격 컴퓨터 간 보안 파일 전송이다. 그뿐 아니라 WinSCP는 기본적인 파일 관리자와 파일 동기화 기능을 제공한다.</p>
<p><img src="https://user-images.githubusercontent.com/34790699/156510751-d5ed76fe-a7ea-4d4c-acfa-dd389de6fc5b.png" alt="Untitled (29)"></p>
<p>호스트 이름에는 AWS의 인스턴스 &gt; 퍼블릭 IPv4 주소를 복붙 한다.
사용자 이름은 아래의 문서를 따라 입력한다.</p>
<p><img src="https://user-images.githubusercontent.com/34790699/156510764-b2ab9982-4f6b-4879-b09c-2158e1b9244b.png" alt="Untitled (30)"></p>
<p>고급 &gt; 고급 &gt; SSH &gt; 인증 &gt; 개인키 파일 클릭 후
AWS에서 생성한 키 페어(.pem 확장자)를 선택 후
(OpenSSH 개인키를 PuTTY 형식으로 변환) ppk 파일로 변환하고
저장 &gt; 저장 순으로 진행한다.</p>
<p>로그인 후 좌상단에 아래와 같은 모습이 보인다. 오른쪽에서 두 번째(번개 모양) 아이콘을 클릭하면 터미널을 실행한다.</p>
<p><img src="https://user-images.githubusercontent.com/34790699/156510861-351ff5f0-7803-4604-920f-871531b6e99b.png" alt="Untitled (31)"></p>
<hr>
<h3 id="mysql-외부에서-접속하기">Mysql 외부에서 접속하기</h3>
<p><code>sudo mysql_secure_installation</code> 명령어 실행을 통해 mysql-server 설치시,
아래와 같은 스크립트가 나오는데, 원하는 조건에 맞게 응답하면 되겠다.</p>
<p>Would you like to setup VALIDATE PASSWORD plugin?
패스워드를 설정하니 Y,</p>
<p>LOW    Length &gt;= 8
MEDIUM Length &gt;= 8, numeric, mixed case, and special characters
STRONG Length &gt;= 8, numeric, mixed case, special characters and dictionary                                                               file
Please enter 0 = LOW, 1 = MEDIUM and 2 = STRONG: 2
가급적 강력한 패스워드를 원하므로 2</p>
<p>Remove anonymous users?
default인 anonymous user를 제거하고자 하므로 y,(단, 접속시 -u 옵션을 반드시 명시해야 한다. 주의!)</p>
<p>Disallow root login remotely?
localhost가 아닌 ip로부터 root 계정으로 원격 액세스가 필요하니 no를 선택했다.</p>
<hr>
<h3 id="mysql에-접근하기-위한-유저-만들기">MySQL에 접근하기 위한 유저 만들기</h3>
<p><code>EC2 인스턴스 서버</code>에서 <code>root</code>계정으로 접속해서 계정을 만든다.</p>
<p>필자의 계정 이름은 <code>bon</code>이다.</p>
<pre><code>$ sudo mysql

mysql&gt; create user 'bon'@'%' identified by '비밀번호';

//만든 계정 확인
mysql&gt; use mysql;
mysql&gt; select user, host from bon;
</code></pre><p><code>bon</code>계정으로 조회가 가능한 데이터베이스 및 테이블을 생성한다.</p>
<pre><code>mysql&gt; create database test;
mysql&gt; use test;
mysql&gt; create table ttest(test1 varchar(100), test2 varchar(100));
mysql&gt; insert into ttest(test1,test2) values('10','20');
mysql&gt; insert into ttest(test1,test2) values('20','30');
</code></pre><hr>
<h3 id="데이터베이스-접근-권한-주기">데이터베이스 접근 권한 주기</h3>
<pre><code>mysql&gt; grant all privileges on test.* to 'bon'@'%';
mysql&gt; flush privileges;
mysql&gt; show grants for 'bon'@'%';
</code></pre><p> <code>flush privileges</code>는 <code>grant</code>라는 테이블을 즉시 리로드해서 변경 사항을 즉시 반영한다.</p>
<p>원격 접속하기 위한 계정 설정은 끝났고 이제 원격 접속을 가능하게 <code>MySQL</code> 설정 파일을 변경하여야한다.</p>
<pre><code>$ cd /etc/mysql/mysql.conf.d
$ sudo vi mysqlc.cnf
</code></pre><hr>
<h3 id="mysql-외부-접속-설정">MySQL 외부 접속 설정</h3>
<p>mysqld.conf를 vi편집기로 열어 bind-address를 0.0.0.0으로 수정한다.</p>
<p><img src="https://user-images.githubusercontent.com/34790699/156510868-a5a14144-f47c-41fd-a079-35428bb8d6cb.png" alt="Untitled (32)"></p>
<p><code>AWS EC2</code> 인스턴스에서도 <code>인바운드 규칙</code>을 설정해주어야한다.</p>
<p><img src="https://user-images.githubusercontent.com/34790699/156510958-d537f484-df5c-4525-a24a-b34ae925225e.png" alt="Untitled (33)"></p>
<p>인바운드 규칙을 다음과 같이 한다.</p>
<p><code>sudo service mysql relaod</code>명령어를 통해 재실행시킨다.</p>
<p><code>Mysql Workbench</code>를 사용한다. (Datagrip 등도 사용이 가능)</p>
<p><img src="https://user-images.githubusercontent.com/34790699/156510962-f3b68066-1255-4d9f-b433-0a50bbed7f77.png" alt="Untitled (34)"></p>
<ul>
<li>만일 접근이 불가하다면 권한 문제일 가능성이 크다.</li>
<li>루트계정 비번변경방법은 아래 웹사이트 링크를 참조한다.
<a href="https://kutar37.tistory.com/entry/Mysql-root-%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8-%EC%9E%AC%EC%84%A4%EC%A0%95">https://kutar37.tistory.com/entry/Mysql-root-비밀번호-재설정</a></li>
</ul>
<p><img src="https://user-images.githubusercontent.com/34790699/156511026-63343c1d-caff-4e40-90eb-fc229bd8a14a.png" alt="Untitled (35)"></p>
<p>성공적으로 접속이 되었다.</p>
<hr>
<h3 id="php-myadmin-설치">php myadmin 설치</h3>
<h3 id="heading"></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">$ sudo apt update
$ sudo apt upgrade
$ sudo apt install phpmyadmin
</code></pre></div><p>Web Server와 phpMyAdmin의 데이터베이스를 dbconfig-common로 설정 여부를 묻는 창이 나온다.</p>
<p>webserver : 현 과정에서는 nginx를 사용할 예정이므로 선택하지 않았다.</p>
<p>dbconfig-common은 필요가 없으므로 No를 선택한다.</p>
<p>심볼릭 링크란 링크를 연결하여 원본 파일을 직접 사용하는 것 같은 효과를 내는 링크를 말한다.</p>
<p>Nginx 가 phpMyAdmin 파일을 올바르게 찾게 하기 위해서 /usr/share/phpmyadmin (phpMyAdmin 디렉토리)로부터 /var/www/html/phpmyadmin(Nginx 도큐먼트 root 디렉토리)로 심볼릭 링크를 생성해준다.</p>
<pre><code>$ sudo ln -s /usr/share/phpmyadmin /var/www/html/phpmyadmin
</code></pre><p>Nginx 설정 파일에서 index.php를 추가하여 php 파일이 nginx를 통해 웹에 보일 수 있게 된다.</p>
<pre><code>$ sudo vi /etc/nginx/sites-available/default
</code></pre><p><img src="https://user-images.githubusercontent.com/34790699/156511030-3e7515f4-6a46-4d6b-bc85-7a9ee3c08523.png" alt="Untitled (36)"></p>
<p>이후 재시작을 통해 변경 사항을 저장, 적용해준다.</p>
<pre><code>$ sudo service nginx restart
</code></pre><p><code>AWS외부아이피주소/phpmyadmin</code> 에 접속한다.</p>
<p>phpmyadmin 접속이 정상적으로 되었다.</p>
<p><img src="https://user-images.githubusercontent.com/34790699/156511100-204c69d9-9b7c-449f-9518-6cc5c5375df1.png" alt="Untitled (37)"></p>
<hr>
<h3 id="도메인-구매하고-적용하기호스팅케이알-이용">도메인 구매하고 적용하기(호스팅케이알 이용)</h3>
<p>호스팅케이알에서는 도메인 등록 시 무료로 네임서버를 제공하고 있으며, 등록 후에 언제든지 변경이 가능하다.</p>
<ol>
<li>호스팅케이알(hosting.kr)웹 사이트 가입 후 도매인을 구매한다.</li>
<li>마이페이지 &gt; 도메인 관리 &gt; DNS 레코드 관리에 들어간다.</li>
<li>호스팅케이알의 DNS 레코드 설정 가이드를 참고하여 아래와 같은 형식으로 기입한다.</li>
</ol>
<p><img src="https://user-images.githubusercontent.com/34790699/156511103-97aa72e4-07aa-4bcf-ad81-b3906ffacd52.png" alt="Untitled (38)"></p>
<p>참조 : <a href="https://help.hosting.kr/hc/ko/articles/900001814906">https://help.hosting.kr/hc/ko/articles/900001814906</a></p>
<ol>
<li>구매한 도메인으로 문제 없이 접속 되는 것을 확인.</li>
</ol>
<p><img src="https://user-images.githubusercontent.com/34790699/156511135-f424cf01-11d5-4372-bbf2-de5b109b3fba.png" alt="Untitled (39)"></p>
<hr>
<h1 id="lets-encrypt-적용하기"><strong>Let’s Encrypt 적용하기</strong></h1>
<h3 id="lets-encrypt-ssl-인증서-발급-방법-4가지"><strong>Let’s Encrypt SSL 인증서 발급 방법 4가지</strong></h3>
<ul>
<li>Let’s Encrypt SSL 인증서 발급 방법은 webroot와 Standalone, DNS의 3가지 방식 존재</li>
<li>인증서 발급은 사이트에서 인증기관인 Let’s Encrypt에 접속해 이 사이트의 유효성을 검증하는 과정을 거치며 이 과정을 아래 4가지 방법 중 하나를 선택해 진행할 수 있음</li>
</ul>
<ol>
<li><em><strong>webroot : 사이트 디렉토리 내에 인증서 유효성을 확인할 수 있는 파일을 업로드하여 인증서를 발급하는 방법. 실제 작동하고 있는 웹서버의 특정 데렉토리의 특정 파일 쓰기 작업을 통해서 인증. 이 방식의 장점은 nginx를 중단시킬 필요가 없음.. 이 방법의 단점은 인증 명령에 하나의 도메인 인증서만 발급 가능</strong></em></li>
<li><em><strong>웹서버. Nginx나 아파치와 같은 웹서버에서 직접 SSL 인증을 실시하고 웹서버에 맞는 SSL세팅값을 부여. 발급이나 갱신을 위해 웹서버를 중단시킬 필요가 없음. 인증서 갱신 시 상황에 맞게 세팅을 자동으로 업데이트. 사용자가 세팅을 변경할 수 있지만 자동 업데이트 시 반영되지는 않음</strong></em></li>
<li><em><strong>Standalone : 사이트 작동을 멈추고 이 사이트의 네크워킹을 이용해 사이트 유효성을 확인해 Let’s Encrypt SSL 인증서를 발급하는 방식. 80포트로 가상 staandalone 웹서버를 띄워 인증서를 발급. 이 방식은 동시에 여러 도메인을 발급 받을 수 있음. 그렇지만 인증서 발급 전에 Nginx를 중단하고 발급 완료 후 다시 Nginx를 시작해야 함</strong></em></li>
<li><em><strong>DNS : 도메인을 쿼리해 확인되는 TXT 레코드로 사이트 유효성을 확인하는 방법. 와일드 카드 방식으로 인증서를 발급 가능. 이 방법은 당연하게도 서버 관리자가 도메인 DNS를 관리/수정할 수 있어야 하며. 인증서 갱신 시마다 DNS에서 TXT값을 변경해야 하므로외부에서 TXT 레코드를 입력할 수 있도록 DNS가 API를 제공하는 경우만 갱신 과정을 자동으로 처리(<a href="http://blog.minase.moe/2">클라우두플레어 API</a>가 대표적인 사례)</strong></em></li>
</ol>
<p>필자가 시도해 본 방법은 2, 3, 4인데 최종적으로 사용하기로한 방법은 2번,</p>
<p>Nginx에서 직접 SSL인증을 실시하는 방법을 사용했다.</p>
<h3 id="3-4를-시도해-보았으나-도중에-적합하지-않다는-생각이-들어-중단했는데-이유는-다음과-같다">3, 4를 시도해 보았으나 도중에 적합하지 않다는 생각이 들어 중단했는데 이유는 다음과 같다.</h3>
<p>3.(Standalone)</p>
<p>standalone 옵션은 또한 한꺼번에 여러 개의 사이트를 인증 받을 수 있는데, 연속된 사이트명을 나열하면 된다.</p>
<p>그런데 허점이 있다. 이렇게 여러개 사이트를 인증 받을 시 인증서 존재 위치가 맨앞 사이트명으로 통일되게 된다. 나중에 사이트를 없앨 때 곤란한 상황에 처할 수 있는 것이다.</p>
<pre><code>service nginx stop

certbot certonly --standalone -d 사이트명

</code></pre><p>4.(DNS)</p>
<p>서브도메인을 모두 적용한다고 가정해 보자. 와일드 카드 방식으로 인증서가 발급 가능하다길래 시도해봤다.</p>
<p>DNS가 API를 제공하는 경우에만  갱신 작업을 수행하는 스크립트를 실행하던가 해서 처리가 가능하다. 일반적인 도메인 등록 업체를 사용하는 경우 수동으로 갱신할 수밖에 없다.</p>
<p>즉 호스팅케이알과 같은 도메인 등록업체를 사용하고 있다면, 와일드카드 SSL인증서는 자동으로 갱신이 되지 않는다고 볼 수 있다.</p>
<h3 id="문제점은-아래와-같다">문제점은 아래와 같다.</h3>
<p><strong>와일드 카드 인증서를 받는 방식은 DNS 소유권을 확인하는 과정이 필요하기 때문에 갱신시에도 <code>DNS _acme-challenge TXT</code> 값을 매번 갱신해서 소유권을 확인하도록 되어있다.보통 도메인 대행업체를 이용해서 사용하는 대부분의 경우 이 TXT 레코드를 자동으로 변경해주는 기능이 없기 때문에 인증서 자동갱신이 되지 않는다.</strong></p>
<p>certbot 에서 제공하는 TXT 레코드 자동갱신 플러그인은 아래와 같이 다양한 종류를 지원한다.</p>
<ul>
<li><code>Cloudflare DNS plugin</code></li>
<li><code>DigitalOcean DNS plugin</code></li>
<li><code>DNSimple DNS plugin</code></li>
<li><code>Gehirn DNS plugin</code></li>
<li><code>Google DNS plugin</code></li>
<li><code>Linode DNS plugin</code></li>
<li><code>OVH DNS plugin</code></li>
<li><code>RFC 2136 DNS plugin</code></li>
<li><code>Route53 DNS plugin</code></li>
<li><code>SakuraCloud DNS plugin</code></li>
</ul>
<p>위에서 지원하지 않는 <strong>일반 도메인대행업체의 DNS서버를 이용하여 와일드카드 인증서를 받았다면 자동갱신은 불가능하다</strong>고 보면 된다.따라서 자동갱신이 가능한 <code>AWS Route53</code>, <code>CloudFlare</code>, <code>Google DNS</code> 등의 서비스를 이용하면 편하게 갱신할 수 있다는점을 참고하기 바란다.</p>
<p>또한 직접 DNS서버(bind같은)를 운영한다면 <code>rfc2136</code> 플러그인을 사용하여 갱신도 가능하다.</p>
<p><code>certbot certonly --manual -d *.bonster.xyz -d bonster.xyz --preferred-challenges dns</code></p>
<p><img src="https://user-images.githubusercontent.com/34790699/156511196-bf42099e-41af-46b5-b64b-089feeab5e3e.png" alt="Untitled (40)"></p>
<p><img src="https://user-images.githubusercontent.com/34790699/156511202-6d1f0f68-49f8-4150-9797-33cb28883f9e.png" alt="Untitled (41)"></p>
<p>위는 시도한 과정중 일부이다</p>
<p>매 3달 주기로 갱신이 필요해질 때마다 도메인 관리 사이트에 들어가서,(필자의 경우 호스팅케이알이다)</p>
<p>DNS 레코드 설정 페이지에서 매 번 위의 색칠한 부분을 포함한(이후 과정이 더 있긴 하지만) 토큰을 갱신 후 수동으로 등록해주는 절차가 필요하다.</p>
<p>DNS서버에 TXT타입의 _acme-challenge 항목을 넣어줘야 한다. (위 이미지상 색칠한 부분)</p>
<p>2개를 넣어 줘야 하는데, 첫번째 항목을 DNS에 갱신시켜 주고 “nslookup -q=txt _acme-challenge.&lt;도메인명&gt;” 갱싱된 내용확인후 진행하면 된다.</p>
<p>3개월마다 일련의 순서를 따라 인증서를 갱신하고 HTTP웹서버를 재시작시켜 줘야 한다.
와일드 카드 인증서는 보안적 측면에서 사용을 지양하는 편이 낫겠다고 판단했다.</p>
<p>이유는 아래에 있다.</p>
<p>와일드카드 인증서 등록방법</p>
<p><a href="https://atl.kr/dokuwiki/doku.php/let_s_encrypt_certbot_wildcard_certificates">https://atl.kr/dokuwiki/doku.php/let_s_encrypt_certbot_wildcard_certificates</a></p>
<h3 id="와일드카드-사용을-지양하는-이유--읽을거리">와일드카드 사용을 지양하는 이유 , 읽을거리</h3>
<p><a href="https://gist.github.com/joepie91/7e5cad8c0726fd6a5e90360a754fc568">https://gist.github.com/joepie91/7e5cad8c0726fd6a5e90360a754fc568</a></p>
<p><a href="https://tech.ssut.me/why-you-probably-should-not-use-a-wildcard-certificate/">https://tech.ssut.me/why-you-probably-should-not-use-a-wildcard-certificate/</a></p>
<p>아래는 위의 링크의 내용을 일부 발췌해 온 것이다.</p>
<!-- raw HTML omitted -->
<p>만약 <code>[images.google.com](http://images.google.com/)</code> 서버만 해킹당한다면 <code>[mail.google.com](http://mail.google.com/)</code>은 영향을 받지 않을겁니다.</p>
<p>하지만, <code>[images.google.com](http://images.google.com/)</code> 서버의 인증서가 <code>*.[google.com](http://google.com/)</code>을 위한 와일드카드 인증서였다면 <code>[mail.google.com](http://mail.google.com/)</code>까지 털어서 이메일 트래픽을 훔쳐본다던가 할 수 있게 되겠죠.</p>
<p> <code>[mail.google.com](http://mail.google.com/)</code> 서버는 해킹당하지 않았는데도 말이죠!</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>만약 당신이 같은 서버에서 같은 서비스를 가리키는 여러 호스트네임을 갖고 있다면 와일드카드 인증서를 써도 좋습니다. 이 와일드카드 인증서가 다른 서버를 가리키는 호스트네임까지 커버하지 않는다면 말이죠. 그렇지 않다면, 각각의 서비스는 반드시 각각의 서비스를 위한 인증서를 가져야 합니다.</p>
<p>만약 당신이 단일 서버면서 단일 서비스를 가리키는 호스트네임을 갖고 있다면 - 예로 <code>[login.mysite.com](http://login.mysite.com/)</code> 및 사용자에게 생성된 사이트 - 사용자에게 생성된 사이트의 경우는 그 서비스를 위한 접두사(prefix)를 두어야 합니다. 예로, 인증서 하나는 <code>[login.mysite.com](http://login.mysite.com/)</code>, 나머지(와일드카드)는 <code>*.[users.mysite.com](http://users.mysite.com/)</code> 처럼요.</p>
<p><strong>(명확하게: 이 내용은 Let&rsquo;s Encrypt에만 해당하는 것이 아니라 <em>일반적인</em> 모든 와일드카드 인증서에 해당합니다. 하지만 Let&rsquo;s Encrypt 덕분에 와일드카드 인증서가 더이상 값비싸지지 않은 지금, 이 문제는 조금 더 주의를 기울일 필요가 있다고 봅니다.)</strong></p>
<!-- raw HTML omitted -->
<h3 id="세-줄-요약">세 줄 요약</h3>
<ol>
<li>하나의 와일드카드 인증서를 공유하는 조건이라면, 하나의 서버가 해킹당할 경우 같은 인증서를 공유하고 있는 다른 서버들 또한 해킹 당하는 것이 가능한 일이다.</li>
<li>서브 도메인이 단일 서비스를 가리키고 있다면 단일 서비스 당 하나의 인증서를 두도록 한다.</li>
<li>필자가 구글링 해 본 결과 메일이나 로그인의 경우 단일 서비스당 하나의 인증서를 두는 편이 좋아 보인다.</li>
</ol>
<hr>
<h2 id="웹서버에서-lets-encript로-ssl-인증서-발급하기"><em><strong>웹서버에서 Let’s Encript로 SSL 인증서 발급하기</strong></em></h2>
<p>아래의 문단은 아래의 한 줄 아래 링크에 있는, Let’s Encrypt의 번역본을 완전히 참조한다.
참조 링크 : <a href="https://velog.io/@pinot/Ubuntu-18.04%EC%97%90%EC%84%9C-Lets-Encrypt%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-Nginx%EC%97%90-SSL%EC%9D%84-%EC%A0%81%EC%9A%A9%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95">https://velog.io/@pinot/Ubuntu-18.04에서-Lets-Encrypt를-사용하여-Nginx에-SSL을-적용하는-방법</a></p>
<h3 id="lets-encript란">Let’s Encript란</h3>
<p>Let’s Encrypt는 무료 <a href="https://www.digitalocean.com/community/tutorials/openssl-essentials-working-with-ssl-certificates-private-keys-and-csrs">SSL / TLS 인증서</a>를 얻고 설치할 수 있는 인증 기관으로, 웹 서버에서 암호화 된 HTTPS를 사용할 수 있게 해줍니다. 또한, Certbot 이라는 자동화 클라이언트를 제공하여 Apache 및 Nginx에서 인증서를 획득하고, 설치하는 전체 프로세스가 자동화 되어 있습니다.</p>
<p>이 도움말에서는 Certbot을 사용하여 Ubuntu 18.04 에서 Nginx용 무료 SSL 인증서를 받고, 자동으로 갱신하도록 설정할 수 있습니다.</p>
<p>또한, 이 도움말에서는 default 파일 대신, 별도의 Nginx 서버 블록 파일을 사용합니다. 일반적인 실수를 방지하고, default 파일을 예외 처리 파일로 유지할 수 있으므로, 도메인마다 새로운 Nginx 서버 블록 파일을 만드는 것을 추천합니다.</p>
<h2 id="1-nginx-설치">1. <strong>Nginx 설치</strong></h2>
<p><code>sudo apt update sudo apt install nginx</code></p>
<h2 id="2-방화벽-설치aws-쓰고있으면-skip">2. <strong>방화벽 설치(AWS 쓰고있으면 Skip)</strong></h2>
<h3 id="웹서버-확인"><strong>웹서버 확인</strong></h3>
<p><code>sudo service nginx status</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown">nginx.service - A high performance web server and a reverse proxy server
   Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: en
   Active: active (running) since Wed 2020-09-16 17:19:24 KST; 1h 19min ago
     Docs: man:nginx(8)
  Process: 7597 ExecStop=/sbin/start-stop-daemon --quiet --stop --retry QUIT/5 -
  Process: 7611 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code
  Process: 7599 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process
 Main PID: 7615 (nginx)
    Tasks: 2 (limit: 1140)
   CGroup: /system.slice/nginx.service
           ├─7615 nginx: master process /usr/sbin/nginx -g daemon on; master_pro
           └─7754 nginx: worker process
</code></pre></div><h2 id="3-서버-블록-설정하기">3. <strong>서버 블록 설정하기</strong></h2>
<p>우분투 18.04에서 Nginx설치하면 기본으로 <code>/var/www/html</code> 을 제공합니다. 새로운 Nginx 서버블록을 만드려면 자신의 도메인이름으로 된 폴더를 만들어야 합니다.</p>
<p><code>sudo mkdir -p /var/www/{도메인이름}/html sudo chown -R $USER:$USER /var/www/{도메인이름}/html sudo chmod -R 755 /var/www/{도메인이름}</code></p>
<p>이제부터 {도메인이름}은 <code>example.com</code> 으로 지정하겠습니다.</p>
<p>지정하고 나면 <code>/etc/nginx/sites-available/</code> 에 <code>example.com</code> 을 만듭니다.</p>
<p><code>sudo vi /etc/nginx/sites-available/example.com</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown">server {
        listen 80;
        listen [::]:80;

        root /var/www/example.com/html;
        index index.html index.htm index.nginx-debian.html;

        server_name example.com www.example.com;

				location / {
								#try_files $uri $uri/ =404; 주석처리
                proxy_pass http://localhost:8080;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forward-For $proxy_add_x_forwarded_for;
                proxy_set_header Host $http_host;
        }
}
</code></pre></div><p>proxy_pass를 추가하여 리버스프록시 설정합니다.</p>
<p>이 파일을 <code>sites-enabled</code> 폴더에 연결합니다.</p>
<p><code>sudo ln -s /etc/nginx/sites-available/example.com /etc/nginx/sites-enabled/</code></p>
<h3 id="etcnginxnginxconf에서-해시-버킷-메모리-문제-해결하기"><code>/etc/nginx/nginx.conf</code> 에서 해시 버킷 메모리 문제 해결하기</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown">...
http {
    ...
    server_names_hash_bucket_size 64;
    ...
}
...
</code></pre></div><h3 id="nginx-설정이-잘됐는지-확인하기">Nginx 설정이 잘됐는지 확인하기</h3>
<p><code>sudo nginx -t</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
</code></pre></div><p>테스트가 성공적이라면 바로 nginx restart</p>
<p><code>sudo service nginx restart</code></p>
<h2 id="4-certbot-설치">4. <strong>Certbot 설치</strong></h2>
<p>Let’s Encrypt를 사용하여 SSL 인증서를 얻기 위해서는 우분투 서버에 Certbot 클라이언트를 설치해야 합니다. Certbot의 개발은 빠르게 개발되고 있어서, 우분투 <code>apt</code> 에서 제공하는 Certbot 패키지는 조금 오래된 버젼입니다. 하지만, Certbot의 레포지토리는 항상 최신을 유지하고 있습니다. 우리는 레포지토리를 사용하여 설치할 예정입니다.</p>
<p>아래 명령어를 추가하여 레포지토리를 추가합니다.</p>
<p><code>sudo add-apt-repository ppa:certbot/certbot</code></p>
<p>설치하기</p>
<p><code>sudo apt install python-certbot-nginx</code></p>
<h2 id="5-ssl-인증서-가져오기">5. <strong>SSL 인증서 가져오기</strong></h2>
<p>Certbot은 다양한 웹 서버에 대하여 SSL 인증서를 얻을 수 있는 플러그인을 제공합니다.</p>
<p>Nginx 플러그인을 사용하기 위해, 다음과 같이 입력합니다.</p>
<p><code>sudo certbot --nginx -d example.com</code></p>
<p>certbot은 -d 우측에 있는 도메인들을 유효하게 만드는 설정을 진행할 수 있습니다.</p>
<p>진행시 다음처럼 뜹니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown">Saving debug log to /var/log/letsencrypt/letsencrypt.log
Plugins selected: Authenticator nginx, Installer nginx
Enter email address (used for urgent renewal and security notices) (Enter &#39;c&#39; to
cancel): 이메일 주소

<span style="color:#66d9ef">-</span> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Please read the Terms of Service at
https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf. You must
agree in order to register with the ACME server at
https://acme-v02.api.letsencrypt.org/directory
<span style="color:#66d9ef">-</span> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
(A)gree/(C)ancel: 

<span style="color:#66d9ef">-</span> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Would you be willing to share your email address with the Electronic Frontier
Foundation, a founding partner of the Let&#39;s Encrypt project and the non-profit
organization that develops Certbot? We&#39;d like to send you email about our work
encrypting the web, EFF news, campaigns, and ways to support digital freedom.
<span style="color:#66d9ef">-</span> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
(Y)es/(N)o:
</code></pre></div><p>이메일 주소 입력하고, 서비스 약관에 동의해야하는 절차를 수행하면 됩니다.</p>
<p>위 절차가 성공적으로 진행한다면, certbot은 https를 어떻게 설정할 지 묻습니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown">Obtaining a new certificate
Performing the following challenges:
http-01 challenge for example.com
Waiting for verification...
Cleaning up challenges
Deploying Certificate to VirtualHost /etc/nginx/sites-enabled/example.com

Please choose whether or not to redirect HTTP traffic to HTTPS, removing HTTP access.
<span style="color:#66d9ef">-</span> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
1: No redirect - Make no further changes to the webserver configuration.
2: Redirect - Make all requests redirect to secure HTTPS access. Choose this for
new sites, or if you&#39;re confident your site works on HTTPS. You can undo this
change by editing your web server&#39;s configuration.
<span style="color:#66d9ef">-</span> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Select the appropriate number [1-2] then [enter] (press &#39;c&#39; to cancel): 2
</code></pre></div><p>질문: http 트래픽을 https로 리다이렉트 할 것입니까? 아니면 http 접근을 막으실 겁니까?</p>
<p>1번: 리다이렉트 없음 - 웹서버 설정에 아무런 변화도 없습니다.</p>
<p>2번: 리다이렉트 - 모든 http 연결을 https로 리다이렉트 합니다. 웹서버 설정을 바꿀 수 있습니다. 바뀐 설정은 다시 되돌릴 수 있습니다.</p>
<p>여기서 2번을 선택하여 http연결을 https로 리다이렉트합니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown">Congratulations! You have successfully enabled
https://example.com

You should test your configuration at:
https://www.ssllabs.com/ssltest/analyze.html?d=example.com
<span style="color:#66d9ef">-</span> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

IMPORTANT NOTES:
 <span style="color:#66d9ef">-</span> Congratulations! Your certificate and chain have been saved at:
   /etc/letsencrypt/live/example.com/fullchain.pem
   Your key file has been saved at:
   /etc/letsencrypt/live/example.com/privkey.pem
   Your cert will expire on 2020-12-15. To obtain a new or tweaked
   version of this certificate in the future, simply run certbot again
   with the &#34;certonly&#34; option. To non-interactively renew <span style="font-style:italic">*all*</span> of
   your certificates, run &#34;certbot renew&#34;
 <span style="color:#66d9ef">-</span> Your account credentials have been saved in your Certbot
   configuration directory at /etc/letsencrypt. You should make a
   secure backup of this folder now. This configuration directory will
   also contain certificates and private keys obtained by Certbot so
   making regular backups of this folder is ideal.
 <span style="color:#66d9ef">-</span> If you like Certbot, please consider supporting our work by:

   Donating to ISRG / Let&#39;s Encrypt:   https://letsencrypt.org/donate
   Donating to EFF:                    https://eff.org/donate-le
</code></pre></div><p>Let’s Encrypt의 인증서는 설치가 완료된 이후 90일 까지만 유효합니다.</p>
<p>90일 지나기전에 certbot을 다시 실행하여 인증서를 갱신해야합니다.</p>
<h2 id="6-ssl-자동으로-갱신시키기">6**. SSL 자동으로 갱신시키기**</h2>
<p>Let’s Encrypt의 인증서는 90일 동안만 유효합니다. 인증서를 자주 갱신시키는 것이 권장되기 때문입니다. 우리는 certbot 패키지를 설치하여 이 문제를 자동화 시킬 수 있습니다. <code>/etc/cron.d</code> 내의 스크립트는 하루 두번씩 실행되어 만료일까지 30일 이내의 모든 인증서를 자동으로 갱신 시킬 수 있습니다.</p>
<p>갱신 절차를 테스트 해보려면, 다음 명령어를 입력하세요.</p>
<p><code>$ sudo certbot renew --dry-run</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown"><span style="color:#66d9ef">-</span> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Processing /etc/letsencrypt/renewal/example.com.conf
<span style="color:#66d9ef">-</span> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Cert not due for renewal, but simulating renewal for dry run
Plugins selected: Authenticator nginx, Installer nginx
Renewing an existing certificate
Performing the following challenges:
http-01 challenge for example.com
Waiting for verification...
Cleaning up challenges
<span style="color:#66d9ef">-</span> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
new certificate deployed with reload of nginx server; fullchain is
/etc/letsencrypt/live/example.com/fullchain.pem
<span style="color:#66d9ef">-</span> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
<span style="color:#66d9ef">-</span> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
** DRY RUN: simulating &#39;certbot renew&#39; close to cert expiry
** (The test certificates below have not been saved.)
Congratulations, all renewals succeeded. The following certs have been renewed: /etc/letsencrypt/live/example.com/fullchain.pem (success)
** DRY RUN: simulating &#39;certbot renew&#39; close to cert expiry
** (The test certificates above have not been saved.)
<span style="color:#66d9ef">-</span> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
IMPORTANT NOTES: - Your account credentials have been saved in your Certbot configuration directory at /etc/letsencrypt. You should make a secure backup of this folder now. This configuration directory will also contain certificates and private keys obtained by Certbot so making regular backups of this folder is ideal.
</code></pre></div><p>오류가 없다면, 당신은 모든 설정을 마친 것입니다. 이제 certbot이 자동적으로 인증서를 갱신하고, Nginx를 재시작 할것입니다. 만약 자동 갱신 프로세스가 실패할 경우, 인증서가 만료되기 이전에 사전에 지정된 이메일로 경고 메시지가 보내질 것입니다.</p>
<p>실제로 수동으로 갱신하려면</p>
<p><code>sudo certbot renew</code></p>
<p>실행하면 됩니다.</p>
<hr>
<h3 id="error">ERROR</h3>
<p>위의 도움말에서 5번 과정 - SSL 인증서 가져오기에서 서두의 명령어를 실행했더니 아래와 같은 에러가 발생했다.</p>
<p>(SSL 인증서를 가져올 목적으로 Certbot과 nginx를 사용하기 위한 명령어)</p>
<p><code>sudo certbot --nginx -d bonster.xyz</code></p>
<p><img src="https://user-images.githubusercontent.com/34790699/156511359-cb0436c7-2874-4ace-9ddf-628ef7b8197a.png" alt="Untitled (42)"></p>
<p><code>nginx.conf</code> 파일의 <code>server_name</code> 설정에 동일한 도메인(xxx)가 중복으로 설정되어 있었다.</p>
<p>필자가 위의 에러가 발생한 이유는 별도의 server 블록을 만들어 놓았던 것 때문이므로, 이것을 backup 시키도록 했다.</p>
<p>보통의 경우라면 중복 찾아 제거하면 될 것이다.</p>
<h3 id="certbot-자동-갱신-확인"><strong>Certbot 자동 갱신 확인</strong></h3>
<p>Let&rsquo;s Encrypt의 인증서는 90일 동안만 유효하므로, 90일마다 갱신시켜줘야 한다.</p>
<p>하지만 설치하는 과정에서 /etc/cron.d에 자동으로 갱신시켜주는 커맨드가 추가되어 있다.</p>
<p>다만, 갱신 프로세스가 잘 동작하는지 테스트를 해보고 싶다면 다음과 같은 명령어를 입력해서</p>
<p>테스트를 진행할 수 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jsx" data-lang="jsx"><span style="color:#a6e22e">$</span> <span style="color:#a6e22e">sudo</span> <span style="color:#a6e22e">certbot</span> <span style="color:#a6e22e">renew</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">dry</span><span style="color:#f92672">-</span><span style="color:#a6e22e">run</span>
</code></pre></div><p>아래는 명령어를 실행한 뒤 화면이다.</p>
<p><img src="https://user-images.githubusercontent.com/34790699/156511374-7cd60bae-3500-4546-b1a8-289ff079a919.png" alt="Untitled (43)"></p>
<p>모든 설정이 끝났다.</p>
<p>이제 certbot이 자동적으로 인증서를 갱신하고, Nginx를 재시작한다.
만약 자동 갱신 프로세스가 실패할 경우, 인증서가 만료되기 이전에 사전에 지정된 이메일로 경고 메시지가 보내진다고 한다.</p>
<p>수동으로 갱신하려면 아래의 명령어를 실행한다.</p>
<p><code>sudo certbot renew</code></p>
<h2 id="7-인바운드-규칙-추가https">7. 인바운드 규칙 추가(HTTPS)</h2>
<p>HTTP → HTTPS 리디렉션 작업을 성공적으로 수행하기 위해 AWS상에서도 보안 설정을 변경해야 한다.</p>
<p>인바운드 규칙 편집에서 HTTPS를 추가해서 443 포트를 연다.</p>
<p><img src="https://user-images.githubusercontent.com/34790699/156511492-85fd09bb-d4c9-491c-9a19-961f6523ca3e.png" alt="Untitled (44)"></p>
<p><a href="https://www.ssllabs.com/ssltest/">www.ssllabs.com/ssltest/</a></p>
<p>위의 웹 사이트에서 해당 도메인에 대한 서버 SSL 테스트를 진행할 수 있다.</p>
<p><img src="https://user-images.githubusercontent.com/34790699/156511496-6c525b06-32f4-4172-996b-127f5964c854.png" alt="Untitled (45)"></p>
<p><img src="https://user-images.githubusercontent.com/34790699/156511622-2d1adbd9-aed4-49d4-a891-d0aaefae83aa.png" alt="Untitled (46)"></p>
<p>크롬을 비롯한 기타 브라우저에서도 인증서가 있는 것으로 확인된다.</p>
<hr>
<h1 id="서브도메인-적용하기">서브도메인 적용하기</h1>
<p>참조 링크 : <a href="https://darrengwon.tistory.com/543">https://darrengwon.tistory.com/543</a></p>
<p>새로운 웹 페이지를 생성한다. <code>mkdir /var/www/[원하는 이름]</code></p>
<p>root의 처음 설정은 <code>/var/www/html</code> 이다.</p>
<p>필자는 <code>/var/www/{도메인이름}/html</code> 형태의 구조로 셋팅했다.</p>
<p>이렇게 폴더 구조를 만든 다음, 해당 폴더로 이동해서, 아래의 명령어를 실행해서 html 파일을 생성 및 편집한다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jsx" data-lang="jsx"><span style="color:#a6e22e">touch</span> <span style="color:#a6e22e">virtualtest</span>.<span style="color:#a6e22e">html</span>
<span style="color:#a6e22e">vim</span> <span style="color:#a6e22e">virtualtest</span>.<span style="color:#a6e22e">html</span>
</code></pre></div><p>755로 권한을 부여한다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jsx" data-lang="jsx"><span style="color:#a6e22e">chmod</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">R</span> <span style="color:#ae81ff">755</span> <span style="color:#f92672">/</span><span style="color:#66d9ef">var</span><span style="color:#960050;background-color:#1e0010">/www/virtual</span>
</code></pre></div><h3 id="dev-도메인과-prod-도메인을-추가로-설정">dev 도메인과 prod 도메인을 추가로 설정</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown"># dev.bonster.xyz, prod.bonster.xyz 디렉토리를 생성
sudo mkdir -p /var/www/dev.bonster.xyz
sudo mkdir -p /var/www/prod.bonster.xyz

# $USER를 사용하여 디렉토리의 소유권을 설정
sudo chown -R $USER:$USER /var/www/dev.bonster.xyz
sudo chmod -R 755 /var/www/prod.bonster.xyz

</code></pre></div><h3 id="신규-디렉토리에-indexhtml-생성">신규 디렉토리에 index.html 생성</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown"># index.html 을 열어 html을 작성
sudo vi /var/www/dev.bonster.xyz/index.html
# dev의 index.html 작성 후 prod의 index.html도 작성
sudo vi /var/www/prod.bonster.xyz/index.html
</code></pre></div><h3 id="서버-블록-생성">서버 블록 생성</h3>
<p>default는 건드리지 않고, 별도의 서버 블록을 생성해 심볼릭 링크를 적용시킬 것이다.</p>
<p>아래의 코드는 <code>prod</code>가 생략되었다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown">sudo vi /etc/nginx/sites-available/dev.bonster.xyz
server {
        listen 80;
        listen [::]:80;

        root /var/www/dev.bonster.xyz;
        index index.html index.htm index.nginx-debian.html;

        server_name dev.bonster.xyz;

        location / {
                try_files $uri $uri/ =404;
        }
}
</code></pre></div><p>심볼릭 링크 생성</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown">sudo ln -s /etc/nginx/sites-available/dev.bonster.xyz /etc/nginx/sites-enabled/
</code></pre></div><h3 id="해시-버킷-메모리-문제-대비">해시 버킷 메모리 문제 대비</h3>
<p>해시 버킷 : 해시 테이블 내부에 있는, 실제 값이 저장되는 장소</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown">sudo vi /etc/nginx/nginx.conf
</code></pre></div><p><img src="https://user-images.githubusercontent.com/34790699/156511677-1cc045c3-1343-49ba-a414-2574d8cb7053.png" alt="Untitled (47)"></p>
<p>중간에 보이는 <code>server_names_hash_bucket_size</code> 에 대한 주석을 해제한다. 위 캡쳐 사진은 주석을 해제한 상태이다.</p>
<h3 id="지금까지-진행한-것에-문제가-없는지-확인">지금까지 진행한 것에 문제가 없는지 확인</h3>
<pre><code>sudo nginx -t
</code></pre><h3 id="적용을-위해-재시작">적용을 위해 재시작</h3>
<pre><code>sudo systemctl restart nginx
</code></pre><h3 id="호스팅케이알도메인-관리-서비스-내-설정하기">호스팅케이알(도메인 관리 서비스) 내 설정하기</h3>
<p>호스팅케이알 웹 페이지의 메뉴얼을 보고 설정한 값은 아래와 같다.</p>
<p><img src="https://user-images.githubusercontent.com/34790699/156511685-262e3625-7595-4408-a7ae-495bc368ee1c.png" alt="Untitled (48)"></p>
<h3 id="결과">결과</h3>
<p><img src="https://user-images.githubusercontent.com/34790699/156512090-f239a938-c98e-40af-8f73-cfebd48a717c.png" alt="Untitled (56)"></p>
<p>앞의 과정을 응용하면, 서브도메인에도 발급된 인증서를 가지고 SSL 세팅값을 부여할 수 있다.</p>
<p>아주 간단하다. certbot 명령어를 활용해 보자. 위에서 한 것과 같이 서브도메인의 url을 명시한 뒤 명령어를 실행하면 되더라.</p>
<p>이렇게 서브도메인 prod와 dev에도 모두 SSL 인증서를 적용했다.</p>
<p>덧붙이자면, 속도때문에 SSL은 로그인이나 회원 가입등 일부 부분에서만 사용한다고 한다. 네이버에서도 일부분만 적용한다고 한다.</p>
<hr>
<h1 id="리디렉션-적용하기-http--https">리디렉션 적용하기 (HTTP → HTTPS)</h1>
<pre><code>server {
    if ($host = bonster.xyz) {
        return 301 https://$host$request_uri;
    } # managed by Certbot

        listen 80 ;
        listen [::]:80 ;
    server_name bonster.xyz;
    return 404; # managed by Certbot
}
</code></pre><p>위와 같이 https로 return 해주면 된다.</p>
<p>Certbot이 알아서 해주던데&hellip; 바꾸기 위해서 vi 편집기로 파일을 열고 보니 별도의 작업이 필요가 없다. 시무룩..</p>
<p>서브도메인에서도 http→ https 리디렉션이 정상적으로 적용이 되고 있다.</p>
<hr>
<h1 id="서브도메인에-웹-페이지-만들기">서브도메인에 웹 페이지 만들기</h1>
<p>별다른 목표가 없어서 테스트 겸, 재미 삼아 겸 아래와 같이 간단히 만들었다.</p>
<p>하나는 문장 하나뿐이고, 하나는 아는 분들의 닉네임으로 구성된 룰렛이다. 누르면 돌아간다.</p>
<p><img src="https://user-images.githubusercontent.com/34790699/156511794-245d28ad-f677-48bf-8edf-56474200a635.png" alt="Untitled (50)"></p>
<p><img src="https://user-images.githubusercontent.com/34790699/156511804-4e913e7e-f6b8-4c0b-ab63-308211e8884b.png" alt="Untitled (51)"></p>
<p>룰렛 소스는 아래의 링크에서 사용했고 나름 수정했다.</p>
<ul>
<li><a href="https://m.blog.naver.com/sgj4958/221865512339">https://m.blog.naver.com/sgj4958/221865512339</a></li>
</ul>
<hr>
<h1 id="what-i-learned">What I learned</h1>
<h3 id="aws의-root사용자와-iamidentity-and-access-management에-대해서">AWS의 root사용자와 IAM(Identity and Access Management)에 대해서</h3>
<p><img src="https://user-images.githubusercontent.com/34790699/156511810-7baf5d41-918f-4468-a32e-9b9ef56e813e.png" alt="Untitled (52)"></p>
<ul>
<li>IAM 사용자 계정을 이용해서 각 사용자 별로 필요한 접근 권한만 줄 수 있다.</li>
<li>여러명이 하나의 계정을 공유하거나 할 일이 없어지는 것이다. 보안이 강화된다.</li>
<li>IAM 사용자 계정에 Full Access Permission을 주면 루트 사용자과 같은 효과를 낼 수 있다.</li>
<li>그리고 그 계정으로 다른 IAM 계정을 관리한다면 루트 사용자 계정을 사용하지 않아도 된다.</li>
<li>루트 사용자만 사용할 수 있는 권한이 존재하므로 필요시만 로그인한다.</li>
<li>이것 역시 보안이 강화되는 효과를 볼 수 있다.</li>
</ul>
<p><strong>AES :</strong> <!-- raw HTML omitted -->의 약자로 &lsquo;고급 암호화 표준'라는 의미이고,
미국 표준 기술 연구소에 의해서 연방 정보 처리 표준으로 지정된 암호화 방식
AES-128, AES-192, AES-256로 불리고, 숫자는 각각 암호화 키 길이이고 키에 따라 각 10,  12, 14 라운드를 실행한다.</p>
<p><strong>TKIP</strong> : 임시 키 무결성 프로토콜(Temporal Key Integrity Protocol, TKIP), IEEE 802.11의 무선 네트워킹 표준으로 사용되는 보안 프로토콜</p>
<p><strong>WPA (Wi-Fi® Protected Access)</strong> : 무선 환경을 위한 데이터 암호화 기술
PSK(Pre-shared Key).말 그대로 사전 공유키</p>
<p><strong>Secure shell (SSH)</strong> : 네트워크 상의 다른 컴퓨터에 로그인하거나 원격 시스템에서 명령을 실행하고 다른 시스템으로 파일을 복사할 수 있도록 해 주는 응용 프로그램 또는 그 프로토콜을 가리킨다.</p>
<p>암호화 알고리즘 정리, 시간이 있으면 복습 해 두도록 하자.</p>
<p><img src="https://user-images.githubusercontent.com/34790699/156511813-e3a7777e-29f5-4a41-8745-e158fd039dfe.png" alt="Untitled (53)"></p>
<h3 id="rsa-ed25519-차이는">RSA, ed25519 차이는??</h3>
<p>Today, the RSA is the most widely used public-key algorithm for SSH key. But compared to Ed25519, it&rsquo;s slower and even considered not safe if it&rsquo;s generated with the key smaller than 2048-bit length. The Ed25519 public-key is compact. It only contains 68 characters, compared to RSA 3072 that has 544 characters.</p>
<ul>
<li>아래의 웹 사이트 링크를 참조한다.
<a href="https://security.stackexchange.com/questions/90077/ssh-key-ed25519-vs-rsa">https://security.stackexchange.com/questions/90077/ssh-key-ed25519-vs-rsa</a></li>
</ul>
<h3 id="apt-get-install과-직접-설치의-차이점">apt-get install과 직접 설치의 차이점</h3>
<ul>
<li>
<p>환경변수 PATH에 실행파일 경로 설정,
init데몬에 등록하는 일 등을 대신 해주는가, 그렇지 않는가에 있다.
&ldquo;apt-get install&rdquo; 명령어 하나로 모조리 세팅해 주는 것이 apt-get
직접 설치는 이 모든것을 직접 해주어야 하는 방식이다.</p>
</li>
<li>
<p>소스 컴파일을 마쳐서 끝나는 문제가 아니고, 수동 설치시 해당 서비스가 의존관계를 가진 라이브러리를 모두 찾아가서 다운로드 해야하므로, 배포판마다 패키지 관리를 편하게 하기 위한 프로그램을 만들어 주는데..
그게 apt-get의 정체이다.</p>
</li>
<li>
<p>우분투에 탑재되는건 dpkg로 apt-get 명령어역시 dpkg가 패키지를 관리해준다.
사용자가 할 일을 프로그램이 대신 해주는 심엔ㄷ..
이 dpkg 패키지 관리 프로그램은 생각보다 똑똑해서 의존라이브러리도 알아서 다 다운받아주고 설정해주고 사용자가 할일이 거의 없게 다 알아서 셋팅해준다.
환경변수까지 모조리 싹~ 다 해준다.
그리고, 시작시 자동 실행이 되라고 init데몬에 올려주기까지 한다.</p>
</li>
<li>
<p>아래의 웹 사이트 링크를 참조한다.
<a href="https://forum.ubuntu-kr.org/viewtopic.php?t=25859">https://forum.ubuntu-kr.org/viewtopic.php?t=25859</a></p>
</li>
<li>
<p><strong>dpkg(Debian Package)</strong>:  데비안 패키지 관리 시스템의 기초가 되는 소프트웨어이다. dpkg 명령어가 . deb 패키지의 설치, 삭제, 정보 제공을 위해 사용된다. dpkg 그 자체는 저레벨의 도구이며, APT와 같은 고급 도구들이 복잡한 패키지 관계와 패키지를 원격에서 받아오는 등의 일을 한다.</p>
</li>
</ul>
<h3 id="dpkg와-apt-get의-차이점">dpkg와 apt-get의 차이점</h3>
<ul>
<li>dpkg는 해당 패키지만 설치를 진행하고 해당 패키지에 종속되서 설치되야하는 프로그램을 같이 설치해주지는 않는다. 이 문제는 apt-get이 해결해준다.</li>
<li>apt-get(Advanced Packaging Tool)
apt-get역시 dpkg를 사용하여 실제 패키지 설치를 수행하다. 수행 방식은 아래 이미지를 참조할 수 있다.</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/34790699/156511818-f95ac63a-8b1c-4746-87c5-1dcec875b975.png" alt="Untitled (54)"></p>
<ul>
<li>
<p>저장소의 url가 /etc/apt/sources.list 에 작성되어있다면 인터넷을 통해서 해당 저장소에서 파일을 다운로드해서 설치한다. 이 방식은 dpkg와 달리 종속된 프로그램이 만약 피씨에 미설치되어있다면 추가 수동설치 필요없이 자동으로 설치해준다.</p>
</li>
<li>
<p>네임서버(DNS: Domain Name Server)는 대표적으로 IP 주소와 도메인 주소를 연결해주는 역할을 한다. 인터넷 주소창에 도메인을 입력할 때 도메인 등록 시 지정된 네임서버를 통해 해당 도메인과 연결된 IP 주소를 확인하여 연결하게 된다.
따라서 도메인 등록시에 네임서버를 지정하고, 해당 네임서버에 연결 설정을 해야 정상 이용이 가능하다.</p>
</li>
</ul>
<p><strong>return 301</strong>
 : ip 주소로 접근하면 return 301 응답으로 도메인으로 이동된다. 301 응답은 영구적인 URL 리다이렉션을 의미한다.</p>
<h2 id="리눅스의-권한-분류">리눅스의 권한 분류</h2>
<ol>
<li>
<p>읽기 Reading - 4</p>
</li>
<li>
<p>쓰기 Writing - 2</p>
</li>
<li>
<p>실행 Executing - 1</p>
</li>
</ol>
<p>만약 777의 권한이 부여되었다면 각각의 7은 (4 + 2 + 1)을 의미한다. 즉 읽고 쓰고 실행 모두 가능하다는 의미이다.</p>
<p><strong>처음의 7 - 소유자 권한</strong></p>
<p><strong>두번째의 7 - 그룹 사용자 권한</strong></p>
<p><strong>세번째의 7 - 기타 사용자 권한</strong></p>
<p>Q/A**) 만약 755의 권한이라면 어떤 권한을 가지는 것일까?**</p>
<p>755는 소유자만 모든 것(쓰기, 읽기, 실행)이 가능하고 그 외 사용자의 경우는 읽기, 실행은 가능하나 쓰기는 불가능하다.</p>
<h3 id="chmod를-사용한-권한-부여방법"><strong>chmod를 사용한 권한 부여방법</strong></h3>
<p><strong>파일 또는 디렉토리(폴더)에 권한을 부여, 수정하는 방법은 아래와 같다.</strong></p>
<ol>
<li>모든 권한 읽기, 쓰기, 실행을 부여</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jsx" data-lang="jsx"><span style="color:#a6e22e">sudo</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">s</span> <span style="color:#75715e">// root 권한 얻기
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">chmod</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">R</span> <span style="color:#ae81ff">777</span> <span style="color:#a6e22e">filename</span>
</code></pre></div><ol start="2">
<li><strong>모든 파일 또는 폴더의 권한을 한번에 바꾸는 방법</strong></li>
</ol>
<p><em><strong>find 키워드를 사용하면 가능하다.</strong></em></p>
<p><code>find /test -exec chmod 755 {} \;</code></p>
<p>/test 경로에 위치한 모든 파일 및 폴더의 권한을 755로 변경한다.</p>
<ol>
<li><strong>폴더 또는 파일의 권한만 모두 변경하는 방법</strong></li>
</ol>
<p><code>find /test -type f chmod 755 {} \;</code></p>
<p>폴더만 변경하려면 아래와 같이 type 값을 f로 바꾼다.</p>
<p><code>find /test -type f chmod 755 {} \;</code></p>
<h3 id="sites-enabled과sites-available의-차이는-무엇인가"><strong>sites-enabled과 sites-available의 차이는 무엇인가</strong></h3>
<p>apache에서도 위와 같은 이름의 파일이 존재하는데 같은 관계이다.</p>
<p>sites-available은 서버에서 운영할 사이트의 설정 파일이며</p>
<p>sites-enabled은 sites-available에 설정한 파일을 심볼릭 링크로 추가하여 실제 운영에 사용할 설정파일들이다.</p>
<hr>
<h1 id="solved-errors">SOLVED ERRORS</h1>
<h3 id="error-1">ERROR</h3>
<p>도메인 관리 사이트에서 TXT에 토큰을 입력해서 추가했으나 여전히 같은 현상 반복,</p>
<p>위의 이슈를 해결하기 위해 다방면으로 시도해 보았으나, 여러번 시도 하니 아래의 에러가 발생</p>
<p><img src="https://user-images.githubusercontent.com/34790699/156511819-6b0f3b0f-c0dc-4352-b1ec-e711005eaba4.png" alt="Untitled (55)"></p>
<p><strong>설명 : SSL 발급 요청을 너무 많이 했는데 모두 유효하지 않은 요청이라 악의적이라 판단해서 해당 도메인에 대해 발급 요청이 일시 중단된 상태이다(1시간 가량 기다린 후에 다시 진행 해야함)</strong></p>
<p>검색을 거듭하던 중 발견한 와일드 카드 사용을 비추천 하는 것에 대한 글이 있었다.</p>
<p>짐작되는 원인은 도메인 관리 사이트의 레코드가 실시간 반영되지 않아서 인 것 같다. 조금 더 시간적 간격을 두고 해봐야 겠다는 생각이 들었다.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<hr>
<h1 id="회고">회고</h1>
<p>감사하게도, 구글링을 해보니 참으로 좋은 글과 소스가 많아서 별 문제없이 과정을 수행한 것 같다.</p>
<p>우선 가상호스팅을 사용하고 있으므로 보안 차원이라도 SSL을 적용하는게 좋을 것 같고</p>
<p>SSL 적용후 속도 저하라던지는 아직 없기 때문에 현재로선 문제는 없다.</p>
<p>하지만 나중에 다른 환경에서 개발하게 된다면 개선을 고민해볼 필요는 있겠다.</p>
<hr>
<h1 id="refference">Refference</h1>
<ul>
<li><a href="https://crossjin.tistory.com/entry/AWS-%EB%A3%A8%ED%8A%B8-%EC%82%AC%EC%9A%A9%EC%9E%90%EC%99%80-IAMIdentity-for-Access-Management%EC%82%AC%EC%9A%A9%EC%9E%90%EC%9D%98-%EC%B0%A8%EC%9D%B4">https://crossjin.tistory.com/entry/AWS-루트-사용자와-IAMIdentity-for-Access-Management사용자의-차이</a></li>
<li><a href="https://7179bb.tistory.com/47">https://7179bb.tistory.com/47</a></li>
<li><a href="https://security.stackexchange.com/questions/90077/ssh-key-ed25519-vs-rsa">https://security.stackexchange.com/questions/90077/ssh-key-ed25519-vs-rsa</a></li>
<li><a href="https://forum.ubuntu-kr.org/viewtopic.php?t=25859">https://forum.ubuntu-kr.org/viewtopic.php?t=25859</a></li>
<li><a href="https://velog.io/@jdk9908/%EC%99%B8%EB%B6%80%EC%97%90%EC%84%9C-MySQL-%EC%A0%91%EC%86%8D%ED%95%98%EA%B8%B0">https://velog.io/@jdk9908/외부에서-MySQL-접속하기</a></li>
<li><a href="https://phsun102.tistory.com/46">https://phsun102.tistory.com/46</a></li>
<li><a href="https://velog.io/@jdk9908/%EC%99%B8%EB%B6%80%EC%97%90%EC%84%9C-MySQL-%EC%A0%91%EC%86%8D%ED%95%98%EA%B8%B0">https://velog.io/@jdk9908/외부에서-MySQL-접속하기</a></li>
<li><a href="https://velog.io/@gillog/AWS-MySQL-%EC%99%B8%EB%B6%80-%EC%A0%91%EC%86%8D-%ED%97%88%EC%9A%A9SSH-TCP">https://velog.io/@gillog/AWS-MySQL-외부-접속-허용SSH-TCP</a></li>
<li><a href="https://r-mango.tistory.com/14">https://r-mango.tistory.com/14</a></li>
<li><a href="https://www.sunny-son.space/AWS/HTTPS%20%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0/">https://www.sunny-son.space/AWS/HTTPS 설정하기/</a></li>
<li><a href="https://velog.io/@pinot/Ubuntu-18.04%EC%97%90%EC%84%9C-Lets-Encrypt%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-Nginx%EC%97%90-SSL%EC%9D%84-%EC%A0%81%EC%9A%A9%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95">https://velog.io/@pinot/Ubuntu-18.04에서-Lets-Encrypt를-사용하여-Nginx에-SSL을-적용하는-방법</a></li>
<li><a href="https://darrengwon.tistory.com/543">https://darrengwon.tistory.com/543</a></li>
<li><a href="https://velog.io/@keepcalm/Ubuntu-Nginx%EC%97%90%EC%84%9C-%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%84%9C%EB%B8%8C%EB%8F%84%EB%A9%94%EC%9D%B8-HTTPS%EC%99%80-Redirection-%EC%A0%81%EC%9A%A9">https://velog.io/@keepcalm/Ubuntu-Nginx에서-도메인-서브도메인-HTTPS와-Redirection-적용</a></li>
<li><a href="https://webisfree.com/2015-01-02/%EB%A6%AC%EB%88%85%EC%8A%A4-%EC%9C%A0%EB%8B%89%EC%8A%A4-%ED%8C%8C%EC%9D%BC-%EA%B6%8C%ED%95%9C-%EC%84%A4%EC%A0%95-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0-777-755">https://webisfree.com/2015-01-02/리눅스-유닉스-파일-권한-설정-알아보기-777-755</a></li>
<li><a href="https://forteleaf.tistory.com/entry/nginx-site-enabled-site-availablemd">https://forteleaf.tistory.com/entry/nginx-site-enabled-site-availablemd</a></li>
<li><a href="https://twpower.github.io/50-make-nginx-virtual-servers">https://twpower.github.io/50-make-nginx-virtual-servers</a></li>
<li><a href="https://chaem0215.tistory.com/24">https://chaem0215.tistory.com/24</a></li>
<li><a href="https://blog.wsgvet.com/letsencrypt-wildcard-certification-issue-and-mariadb-install/">https://blog.wsgvet.com/letsencrypt-wildcard-certification-issue-and-mariadb-install/</a></li>
<li><a href="https://oasisfores.com/letsencrypt-wildcard-ssl-certificate/">https://oasisfores.com/letsencrypt-wildcard-ssl-certificate/</a></li>
<li><a href="https://www.kkoc.org/?p=421">https://www.kkoc.org/?p=421</a></li>
<li><a href="https://happist.com/548924/%EC%9B%8C%EB%93%9C%ED%94%84%EB%A0%88%EC%8A%A4-tips-lets-encrypt-%EB%AC%B4%EB%A3%8C-ssl%EC%9D%B8%EC%A6%9D%EC%84%9C-%EB%B0%9C%EA%B8%89-%EB%B0%8F-%EC%9E%90%EB%8F%99-%EA%B0%B1%EC%8B%A0">https://happist.com/548924/워드프레스-tips-lets-encrypt-무료-ssl인증서-발급-및-자동-갱신</a></li>
<li><a href="https://www.thewordcracker.com/miscellaneous/%EB%A6%AC%EB%88%85%EC%8A%A4-ubuntu-16-0416-10%EC%97%90%EC%84%9C-lets-encrypt-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0nginx-%ED%99%98%EA%B2%BD/#ftoc-heading-5">https://www.thewordcracker.com/miscellaneous/리눅스-ubuntu-16-0416-10에서-lets-encrypt-설정하기nginx-환경/#ftoc-heading-5</a></li>
<li><a href="https://m.blog.naver.com/sgj4958/221865512339">https://m.blog.naver.com/sgj4958/221865512339</a></li>
</ul>

    
</div>

    
<div class="footer">


    
        <div class="tags">
            <i class="fa fa-tags"></i>
            <div class="links">
                
                    
                    
                    <a href="https://xfrnk2.github.io/tags/server/">server</a>
                    
                
                    
                    
                    <a href="https://xfrnk2.github.io/tags/developement/">developement</a>
                    
                
            </div>
        </div>
    

    
</div>

</article>

        
    </div>

    
        <div id="comments-container">
            <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "xfrnk2-github-io" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            

            

            

        </div>
    

    </div>

    
<footer>
    <div class="container">

        
        <div class="recent-posts">
            <strong>Latest posts</strong>
            <ul>
                
                
                    <li>
                        <a href="https://xfrnk2.github.io/network/123/">라우터(Router)와 스위치(Switch)</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/review/svp%ED%9B%84%EA%B8%B0/">2023년 상반기 삼성 SVP 신입입문교육 후기</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/cs/floatingpoint/">부동소수점 및 음의 소수를 부동소수점으로 나타내는 방법</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/review/2022%EB%85%84%ED%9A%8C%EA%B3%A0/">2022년 한 해를 회고하다. 최종 합격 안내를 받은 회사가 있기 까지의 기록.</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/review/220707_saffy_start_camp/">자기혁신방법론 특강 후기</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/server_developement/infra-server-management/">앞으로 해가면 좋을 인프라 관리</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/opensource/good_opensource_instruction_list/">좋은 오픈소스 관련 정보 사이트 목록</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/mysql/mysql_import_super_previlage/">[MYSQL] ERROR 1227 (42000) at line 55: Access denied; you need (at least one of) the SUPER privilege(s) for this operation 해결</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/java/java-regex/">Validation을 위해 작성하였던 정규 표현식 뜯어보기</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/java/java-teamflix-social-login-workflow/">넷플릭스 클론 팀 프로젝트 - 소셜로그인 WORK FLOW</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/java/java-teamflix-spring-study/">2022.03.19~2022.03.31 Spring 공부 정리</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/java/java-http-request-and-controller-annotation/">자바로 하는 HTTP 요청 사용과 스프링 컨트롤러 어노테이션 정리</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/database/database-mysql-procedure/">Mysql Procedure 공부와 실제 데이터 연산에 적용하기</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/server_developement/rising_camp_server_week3_server_installation_on_aws_and_rds_and_query/">당근마켓 클론코딩 서버 개발 - RDS 구축과 DB 설계, 한방 쿼리 작성해보기</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/server_developement/rising_camp_server_week2_server_installation_on_aws/">서버를 구축하고 AWS상에 서비스하기</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/server_developement/rising_camp_server_week1_server_source_installation_modified/">소스 설치로 LAMP 실행환경 구축하기 (VM에서 리눅스 계열 OS를 인스턴스 생성하고 APM 소스 설치하기)</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/terminal/mkdir_p_option/">mkdir -p 옵션을 사용할 경우 어떤 일이 벌어지나</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/resolved_problem/module_build_error_outdated_babel_packages/">index.js에서 &#39;Preset files are not allowed to export objects&#39; 에러가 발생한 이유</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/web/npm_-save_and_-save-dev/">npm --save와 --save-dev를 사용하는 이유, 뒤에 --production을 사용하는 이유</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/review/211218_%EC%9A%B0%EC%95%84%ED%95%9C%ED%85%8C%ED%81%AC%EC%BD%94%EC%8A%A4_%ED%94%84%EB%A6%AC%EC%BD%94%EC%8A%A4%ED%9B%84%EA%B8%B0/">2021 우아한 테크코스 4기 프리코스 후기</a>
                    </li>
                
            </ul>
        </div>
        

        
        <div class="categories">
            
            <a href="https://xfrnk2.github.io/categories/"><strong>Categories</strong></a>
            

            <ul>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/til/">TIL (345)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/django/">Django (15)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/review/">review (9)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/resolved-problem/">resolved problem (8)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/python/">Python (6)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/food-for-thought/">Food For Thought (5)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/algorithm/">Algorithm (4)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/codeit/">codeit (4)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/compiler/">compiler (4)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/database/">database (4)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/java/">Java (4)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/server/">server (4)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/developement/">developement (3)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/docker/">docker (3)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/react/">React (3)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/spring/">Spring (3)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/web/">web (3)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/mysql/">mysql (2)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/blog/">blog (1)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/book/">book (1)</a>
                
                </li>
                
            </ul>
        </div>
        

        <div class="right">
            
            <div class="external-profiles">
                <strong>Social media</strong>
                
                <a href="https://github.com/xfrnk2" target="_blank" rel=""><em class="fab fa-github"></em></a>
                
            </div>
            

            

            
            <div class="archive">
                
                <a href="https://xfrnk2.github.io/archive/"><strong>Archive</strong></a>
                
            </div>
            
        </div>
    </div>
</footer>


<div class="credits">
    <div class="container">
        <div class="copyright">
            <a href="https://github.com/xfrnk2" target="_blank">
                &copy;
                
                2023
                
                by xfrnk2
            </a>
            
        </div>
        <div class="author">
            <a href="https://github.com/Lednerb/bilberry-hugo-theme"
                target="_blank">Bilberry Hugo Theme</a>
        </div>
    </div>
</div>


    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'G-SL1RKJG57X', 'auto');
	
	ga('send', 'pageview');
}
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [['$','$'], ['\\(','\\)']]}
        });
</script>

    
    <script src="https://xfrnk2.github.io/theme.js"></script>
    

    
    
    

    
    <div id="activate-algolia-search" class="hidden">
  <input type="hidden" id="algolia-search-appId" value="6T2JVR4D9M">
  <input type="hidden" id="algolia-search-apiKey" value="87e54ae22d96655f4823f9f1ffaefff8">
  <input type="hidden" id="algolia-search-indexName" value="xfrnk2blog">
  <input type="hidden" id="algolia-search-noSearchResults" value="Nothing found.">

  
</div>

    

    
</body>

</html>
