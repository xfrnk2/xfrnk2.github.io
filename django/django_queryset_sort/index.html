<!DOCTYPE html>


  
<html itemscope itemtype="https://schema.org/WebPage" class="no-js" lang="en">

<head prefix="og: http://ogp.me/ns#">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="siteBaseUrl" content="https://xfrnk2.github.io/">
    <meta name="author" content="xfrnk2">
    <meta name="description" content="Bilberry Premium Theme for Hugo.">
    <meta name="keywords" content="blog,personal,responsive,search,font awesome,pages,posts,multilingual,highlight.js,syntax highlighting,premium,shortcuts">
    <meta name="generator" content="Hugo 0.113.0">
    <title>
        
           
               Django - Queryset의 정렬 및 범위조건 &vert; Rad Blog
           
        
    </title>
    <meta itemprop="name" content="Django - Queryset의 정렬 및 범위조건">
    <meta itemprop="description" content="Django - Queryset의 정렬 및 범위조건 - Bilberry Premium Theme for Hugo.">
    <meta property="og:site_name" content="Rad Blog">

    <meta property="og:title" content="Django - Queryset의 정렬 및 범위조건" />
<meta property="og:description" content="이진석 선생님의 리액트와 함께 장고 시작하기 수강중 정리한 글입니다.
정렬 조건 추가 일관된 순서를 보장받기 위해 정렬 조건을 추가 DB에서 다수 필드에 대한 정렬을 지원하나 가급적 단일 필드로 하는것이 성능에 이익 시간순/역순 정렬이 필요할때는 id필드를 활용 정렬 조건 지정 방법 1. (추천) 모델 클래스의 Meta 속성으로 ordering 설정 : list로 지정 2. 모든 queryset에 order_by(&hellip;)에 지정 (주의) queryset코드에서 직접 order_by를 지정하면, Meta&gt;ordering 설정값이 무시된다
django-extensions 커스텀 확장 기능 제공 라이브러리 Management Command, additional database fields, admin extensions 등을 지원 &gt; python manage." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xfrnk2.github.io/django/django_queryset_sort/" /><meta property="article:section" content="django" />
<meta property="article:published_time" content="2020-05-06T12:55:27+09:00" />
<meta property="article:modified_time" content="2020-05-06T12:55:27+09:00" />


    


    <script src="/modernizr-simple.js"></script>

    


    
    <link rel="canonical" href="https://xfrnk2.github.io/django/django_queryset_sort/">
    

    <link rel="stylesheet" href="https://xfrnk2.github.io/theme.css">

    

    
        
            <link rel="stylesheet" href="https://xfrnk2.github.io/wwr11.css">
        
    

    
</head>

<body class="bilberry-hugo-theme">
    

    
    <nav>

    <div class="container">
        <ul class="topnav">
            
                
                    <li><a href="https://xfrnk2.github.io/page/about/">About</a></li>
                
            
        </ul>

        
            <div id="search-box" class="search">
                <i class="fas fa-search"></i>
                <input id="search" type="text" placeholder="Search ...">
            </div>
        
    </div>
</nav>


    
    <header>

    <div class="container">
        <div class="logo">
            <a href="/" class="logo">
                
                    <img src="/mugen.png" alt="">
                

                <span class="overlay"><i class="fa fa-home"></i></span>
            </a>
        </div>
        <div class="titles">
            <h3 class="title">
                <a href="/">
                    Rad Blog
                </a>
            </h3>

            
                <span class="subtitle">Archive</span>
            
        </div>

        

        
            <div class="toggler">
        
                <i class="fa fa-bars" aria-hidden="true"></i>
            </div>
    </div>
</header>


    <div class="main container">
        
    <div class="article-wrapper u-cf single">
        
            <a class="bubble" href="https://xfrnk2.github.io/django/django_queryset_sort/">
    <i class="fas fa-fw fa-pencil-alt"></i>
</a>

<article class="default article">
    

    <div class="content">
    <h1 class="article-title">
        <a href="https://xfrnk2.github.io/django/django_queryset_sort/">
            Django - Queryset의 정렬 및 범위조건
        </a>
    </h1>

    <div class="meta">
        
            
                <span class="date moment">2020-05-06</span>
            
        

        

        
            <span class="categories">
                
                    
                    
                        <a href="https://xfrnk2.github.io/categories/django/">Django</a>
                    
                
            </span>
        

        
            <span class="author">
                
                
                    <a href="https://xfrnk2.github.io/author/xfrnk2/">xfrnk2</a>
                
            </span>
        
    </div>

    
        

        <blockquote>
<p>이진석 선생님의 <a href="https://educast.com/course/web/ZU53">리액트와 함께 장고 시작하기</a> 수강중 정리한 글입니다.</p>
</blockquote>
<hr>
<h3 id="정렬-조건-추가">정렬 조건 추가</h3>
<ul>
<li>일관된 순서를 보장받기 위해 정렬 조건을 추가</li>
<li>DB에서 다수 필드에 대한 정렬을 지원하나 가급적 단일 필드로 하는것이 성능에 이익</li>
<li>시간순/역순 정렬이 필요할때는 id필드를 활용</li>
</ul>
<hr>
<h3 id="정렬-조건-지정-방법">정렬 조건 지정 방법</h3>
<h6 id="1-추천-모델-클래스의-meta-속성으로-ordering-설정--list로-지정">1. (추천) 모델 클래스의 Meta 속성으로 ordering 설정 : list로 지정</h6>
<h6 id="2-모든-queryset에-order_by에-지정">2. 모든 queryset에 order_by(&hellip;)에 지정</h6>
<blockquote>
<p>(주의) queryset코드에서 직접 order_by를 지정하면, Meta&gt;ordering 설정값이 무시된다</p>
</blockquote>
<hr>
<h6 id="django-extensions">django-extensions</h6>
<ul>
<li>커스텀 확장 기능 제공 라이브러리</li>
<li>Management Command, additional database fields, admin extensions 등을 지원</li>
</ul>
<pre tabindex="0"><code>&gt; python manage.py shell_plus --print-sql
</code></pre><hr>
<h3 id="정렬-지정하기-1">정렬 지정하기 #1</h3>
<pre tabindex="0"><code>class Item(Models.Model):
	name = models.CharField(max_length=100)
	desc = models.TextField(blank=True)
	price = models.PositiveIntegerField()
	created_at = models.DateTimeField(auto_now_add=True)
	updated_at = models.DataTimeField(auto_now=True)
	
	class Meta:
		ordering = [&#39;id&#39;]
</code></pre><h3 id="정렬-지정하기-2">정렬 지정하기 #2</h3>
<pre tabindex="0"><code>#1
In [4]: Post.objects.all().order_by(&#39;id&#39;)
Out[4]: SELECT &#34;blog1_post&#34;.&#34;id&#34;,
       &#34;blog1_post&#34;.&#34;author_id&#34;,
       &#34;blog1_post&#34;.&#34;title&#34;,
       &#34;blog1_post&#34;.&#34;content&#34;,
       &#34;blog1_post&#34;.&#34;created_at&#34;,
       &#34;blog1_post&#34;.&#34;updated_at&#34;,
       &#34;blog1_post&#34;.&#34;photo&#34;,
       &#34;blog1_post&#34;.&#34;is_public&#34;
  FROM &#34;blog1_post&#34;
 ORDER BY &#34;blog1_post&#34;.&#34;id&#34; ASC
 LIMIT 21

Execution time: 0.000000s [Database: default]
&lt;QuerySet [&lt;Post: 첫번째 제목&gt;, &lt;Post: 두번째 제목&gt;, &lt;Post: 세번째 제목&gt;]&gt;


#2
In [5]: Post.objects.all().order_by(&#39;-id&#39;)
Out[5]: SELECT &#34;blog1_post&#34;.&#34;id&#34;,
       &#34;blog1_post&#34;.&#34;author_id&#34;,
       &#34;blog1_post&#34;.&#34;title&#34;,
       &#34;blog1_post&#34;.&#34;content&#34;,
       &#34;blog1_post&#34;.&#34;created_at&#34;,
       &#34;blog1_post&#34;.&#34;updated_at&#34;,
       &#34;blog1_post&#34;.&#34;photo&#34;,
       &#34;blog1_post&#34;.&#34;is_public&#34;
  FROM &#34;blog1_post&#34;
 ORDER BY &#34;blog1_post&#34;.&#34;id&#34; DESC
 LIMIT 21

Execution time: 0.000000s [Database: default]
&lt;QuerySet [&lt;Post: 세번째 제목&gt;, &lt;Post: 두번째 제목&gt;, &lt;Post: 첫번째 제목&gt;]&gt;

#1과 2의 차이
1 정순-&gt; ORDER BY &#34;blog1_post&#34;.&#34;id&#34; ASC
2 역순-&gt;  ORDER BY &#34;blog1_post&#34;.&#34;id&#34; DESC
</code></pre><hr>
<h3 id="범위-조건">범위 조건</h3>
<ul>
<li>슬라이싱을 통해서 SELECT 쿼리에 &ldquo;OFFSET/LIMIT&rdquo; 추가 기능</li>
<li>str/list/tuple에서의 슬라이싱과 거의 유사하나, <strong>음수 인덱스 접근 슬라이싱은 지원하지 않음
(데이터베이스에서 지원하지 않기 때문)</strong></li>
</ul>
<h6 id="형태">형태</h6>
<blockquote>
<p><strong>객체[start:stop:step]</strong></p>
<ul>
<li>Offset -&gt; Start</li>
<li>Limit -&gt; start</li>
<li><strong>Step이 들어가는 순간 반환값의 타입이 queryset-&gt; list가 된다</strong><br>
-&gt; (쿼리에 대응되지 않으므로 사용을 비추천)</li>
</ul>
</blockquote>
<h3 id="코드-예시">코드 예시</h3>
<h6 id="음수-인덱스-접근시-에러-발생">음수 인덱스 접근시 에러 발생</h6>
<pre tabindex="0"><code>In [7]: Post.objects.all().order_by(&#34;-id&#34;)[:-1]
---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
&lt;ipython-input-7-b98dbbba47d0&gt; in &lt;module&gt;
----&gt; 1 Post.objects.all().order_by(&#34;-id&#34;)[:-1]

C:\Program Files\python\lib\site-packages\django\db\models\query.py in __getitem__(self, k)
    288                 % type(k).__name__
    289             )
--&gt; 290         assert ((not isinstance(k, slice) and (k &gt;= 0)) or
    291                 (isinstance(k, slice) and (k.start is None or k.start &gt;= 0) and
    292                  (k.stop is None or k.stop &gt;= 0))), \

AssertionError: Negative indexing is not supported.
</code></pre><h6 id="객체startstop--queryset-타입-반환">객체[start:stop] : Queryset 타입 반환</h6>
<pre tabindex="0"><code>In [9]: Post.objects.all().order_by(&#34;-id&#34;)[1:2]
Out[9]: SELECT &#34;blog1_post&#34;.&#34;id&#34;,
       &#34;blog1_post&#34;.&#34;author_id&#34;,
       &#34;blog1_post&#34;.&#34;title&#34;,
       &#34;blog1_post&#34;.&#34;content&#34;,
       &#34;blog1_post&#34;.&#34;created_at&#34;,
       &#34;blog1_post&#34;.&#34;updated_at&#34;,
       &#34;blog1_post&#34;.&#34;photo&#34;,
       &#34;blog1_post&#34;.&#34;is_public&#34;
  FROM &#34;blog1_post&#34;
 ORDER BY &#34;blog1_post&#34;.&#34;id&#34; DESC
 LIMIT 1
OFFSET 1

Execution time: 0.000000s [Database: default]
&lt;QuerySet [&lt;Post: 두번째 제목&gt;]&gt;		      
</code></pre><h6 id="객체startstopstep--list-타입-반환">객체[start:stop:step] : list 타입 반환</h6>
<pre tabindex="0"><code>In [10]: Post.objects.all().order_by(&#34;-id&#34;)[1:2:1]
SELECT &#34;blog1_post&#34;.&#34;id&#34;,
       &#34;blog1_post&#34;.&#34;author_id&#34;,
       &#34;blog1_post&#34;.&#34;title&#34;,
       &#34;blog1_post&#34;.&#34;content&#34;,
       &#34;blog1_post&#34;.&#34;created_at&#34;,
       &#34;blog1_post&#34;.&#34;updated_at&#34;,
       &#34;blog1_post&#34;.&#34;photo&#34;,
       &#34;blog1_post&#34;.&#34;is_public&#34;
  FROM &#34;blog1_post&#34;
 ORDER BY &#34;blog1_post&#34;.&#34;id&#34; DESC
 LIMIT 1
OFFSET 1

Execution time: 0.000000s [Database: default]
Out[10]: [&lt;Post: 두번째 제목&gt;]
</code></pre>
    
</div>

    
<div class="footer">


    
        <div class="tags">
            <i class="fa fa-tags"></i>
            <div class="links">
                
                    
                    
                    <a href="https://xfrnk2.github.io/tags/django/">Django</a>
                    
                
                    
                    
                    <a href="https://xfrnk2.github.io/tags/model/">Model</a>
                    
                
                    
                    
                    <a href="https://xfrnk2.github.io/tags/queryset/">Queryset</a>
                    
                
            </div>
        </div>
    

    
</div>

</article>

        
    </div>

    
        <div id="comments-container">
            <div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "xfrnk2-github-io" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            

            

            

        </div>
    

    </div>

    
<footer>
    <div class="container">

        
        <div class="recent-posts">
            <strong>Latest posts</strong>
            <ul>
                
                
                    <li>
                        <a href="https://xfrnk2.github.io/kubernetes/kubernetes_introduction/">kubernetes 소개</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/network/123/">라우터(Router)와 스위치(Switch)</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/review/svp%ED%9B%84%EA%B8%B0/">2023년 상반기 삼성 SVP 신입입문교육 후기</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/cs/floatingpoint/">부동소수점 및 음의 소수를 부동소수점으로 나타내는 방법</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/review/2022%EB%85%84%ED%9A%8C%EA%B3%A0/">2022년 한 해를 회고하다. 최종 합격 안내를 받은 회사가 있기 까지의 기록.</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/review/220707_saffy_start_camp/">자기혁신방법론 특강 후기</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/server_developement/infra-server-management/">앞으로 해가면 좋을 인프라 관리</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/opensource/good_opensource_instruction_list/">좋은 오픈소스 관련 정보 사이트 목록</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/mysql/mysql_import_super_previlage/">[MYSQL] ERROR 1227 (42000) at line 55: Access denied; you need (at least one of) the SUPER privilege(s) for this operation 해결</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/java/java-regex/">Validation을 위해 작성하였던 정규 표현식 뜯어보기</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/java/java-teamflix-social-login-workflow/">넷플릭스 클론 팀 프로젝트 - 소셜로그인 WORK FLOW</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/java/java-teamflix-spring-study/">2022.03.19~2022.03.31 Spring 공부 정리</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/java/java-http-request-and-controller-annotation/">자바로 하는 HTTP 요청 사용과 스프링 컨트롤러 어노테이션 정리</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/database/database-mysql-procedure/">Mysql Procedure 공부와 실제 데이터 연산에 적용하기</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/server_developement/rising_camp_server_week3_server_installation_on_aws_and_rds_and_query/">당근마켓 클론코딩 서버 개발 - RDS 구축과 DB 설계, 한방 쿼리 작성해보기</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/server_developement/rising_camp_server_week2_server_installation_on_aws/">서버를 구축하고 AWS상에 서비스하기</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/server_developement/rising_camp_server_week1_server_source_installation_modified/">소스 설치로 LAMP 실행환경 구축하기 (VM에서 리눅스 계열 OS를 인스턴스 생성하고 APM 소스 설치하기)</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/terminal/mkdir_p_option/">mkdir -p 옵션을 사용할 경우 어떤 일이 벌어지나</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/resolved_problem/module_build_error_outdated_babel_packages/">index.js에서 &#39;Preset files are not allowed to export objects&#39; 에러가 발생한 이유</a>
                    </li>
                
                    <li>
                        <a href="https://xfrnk2.github.io/web/npm_--save_and_--save-dev/">npm --save와 --save-dev를 사용하는 이유, 뒤에 --production을 사용하는 이유</a>
                    </li>
                
            </ul>
        </div>
        

        
        <div class="categories">
            
            <a href="https://xfrnk2.github.io/categories/"><strong>Categories</strong></a>
            

            <ul>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/til/">TIL (345)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/django/">Django (15)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/review/">review (9)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/resolved-problem/">resolved problem (8)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/python/">Python (6)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/food-for-thought/">Food For Thought (5)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/algorithm/">Algorithm (4)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/codeit/">codeit (4)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/compiler/">compiler (4)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/database/">database (4)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/java/">Java (4)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/server/">server (4)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/developement/">developement (3)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/docker/">docker (3)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/react/">React (3)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/spring/">Spring (3)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/web/">web (3)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/mysql/">mysql (2)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/blog/">blog (1)</a>
                
                </li>
                
                <li>
                
                    <a href="https://xfrnk2.github.io/categories/book/">book (1)</a>
                
                </li>
                
            </ul>
        </div>
        

        <div class="right">
            
            <div class="external-profiles">
                <strong>Social media</strong>
                
                <a href="https://github.com/xfrnk2" target="_blank" rel=""><em class="fab fa-github"></em></a>
                
            </div>
            

            

            
            <div class="archive">
                
                <a href="https://xfrnk2.github.io/archive/"><strong>Archive</strong></a>
                
            </div>
            
        </div>
    </div>
</footer>


<div class="credits">
    <div class="container">
        <div class="copyright">
            <a href="https://github.com/xfrnk2" target="_blank">
                &copy;
                
                2023
                
                by xfrnk2
            </a>
            
        </div>
        <div class="author">
            <a href="https://github.com/Lednerb/bilberry-hugo-theme"
                target="_blank">Bilberry Hugo Theme</a>
        </div>
    </div>
</div>


    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SL1RKJG57X"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-SL1RKJG57X', { 'anonymize_ip': false });
}
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [['$','$'], ['\\(','\\)']]}
        });
</script>

    
    <script src="https://xfrnk2.github.io/theme.js"></script>
    

    
    
    

    
    <div id="activate-algolia-search" class="hidden">
  <input type="hidden" id="algolia-search-appId" value="6T2JVR4D9M">
  <input type="hidden" id="algolia-search-apiKey" value="87e54ae22d96655f4823f9f1ffaefff8">
  <input type="hidden" id="algolia-search-indexName" value="xfrnk2blog">
  <input type="hidden" id="algolia-search-noSearchResults" value="Nothing found.">

  
</div>

    

    
</body>

</html>
